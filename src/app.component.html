<div class="min-h-screen bg-stone-100 font-sans text-stone-800">
  <header class="bg-gradient-to-r from-emerald-600 to-emerald-500 text-white shadow-lg">
    <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-5">
      <h1 class="text-3xl font-bold tracking-tight">
         Konfigurator Kaktusa 3D
      </h1>
      <p class="text-emerald-100 mt-1">Dostosuj ka偶dy szczeg贸 swojego wirtualnego kaktusa.</p>
    </div>
  </header>

  <main class="container mx-auto p-4 sm:p-6 lg:p-8 grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Kolumna z Podgldem -->
    <div class="lg:col-span-2">
      <div class="sticky top-8">
        <div class="bg-white h-[80vh] rounded-xl shadow-lg border border-stone-200 flex flex-col">
          <div class="p-4 border-b border-stone-200">
             <h3 class="text-lg font-semibold text-stone-700 text-center">Podgld Modelu 3D</h3>
          </div>
          <div class="flex-grow bg-grid-pattern relative">
            <app-cactus-viewer [config]="config()" class="absolute inset-0"></app-cactus-viewer>
          </div>
        </div>
      </div>
    </div>

    <!-- Kolumna z Kontrolkami -->
    <div class="lg:col-span-1 flex flex-col gap-6">
      <!-- Sekcja: Ksztat G贸wny -->
      <section class="bg-white p-6 rounded-xl shadow-lg border border-stone-200">
        <h2 class="text-xl font-semibold text-emerald-700 border-b border-stone-200 pb-3 mb-4">Ksztat G贸wny</h2>
        <div class="space-y-5">
          <app-slider-control
            label="Wysoko"
            [min]="10" [max]="150" [step]="1" [value]="config().body.height"
            unit="cm"
            (valueChange)="updateBodyHeight($event)">
          </app-slider-control>
          <app-slider-control
            label="Szeroko"
            [min]="10" [max]="100" [step]="1" [value]="config().body.width"
            unit="%"
            (valueChange)="updateBodyWidth($event)">
          </app-slider-control>
          <app-slider-control
            label="Liczba 偶eber"
            [min]="5" [max]="20" [step]="1" [value]="config().body.ribs"
            (valueChange)="updateBodyRibs($event)">
          </app-slider-control>
          <app-slider-control
            label="Segmentacja"
            [min]="0" [max]="100" [step]="1" [value]="config().body.segmentation"
            unit="%"
            (valueChange)="updateBodySegmentation($event)">
          </app-slider-control>
        </div>
      </section>

      <!-- Sekcja: Odnogi / Ramiona -->
      <section class="bg-white p-6 rounded-xl shadow-lg border border-stone-200">
        <h2 class="text-xl font-semibold text-emerald-700 border-b border-stone-200 pb-3 mb-4">Odnogi / Ramiona</h2>
        <div class="space-y-5">
           <app-slider-control
            label="Ilo"
            [min]="0" [max]="10" [step]="1" [value]="config().arms.count"
            (valueChange)="updateArmsCount($event)">
          </app-slider-control>
           <app-slider-control
            label="Poo偶enie"
            [min]="0" [max]="100" [step]="1" [value]="config().arms.position"
            unit="%"
            (valueChange)="updateArmsPosition($event)">
          </app-slider-control>
           <app-slider-control
            label="Dugo"
            [min]="10" [max]="100" [step]="1" [value]="config().arms.length"
            unit="%"
            (valueChange)="updateArmsLength($event)">
          </app-slider-control>
           <app-slider-control
            label="Grubo"
            [min]="10" [max]="100" [step]="1" [value]="config().arms.thickness"
            unit="%"
            (valueChange)="updateArmsThickness($event)">
          </app-slider-control>
          <app-slider-control
            label="Losowo poo偶enia"
            [min]="1" [max]="1000" [step]="1" [value]="config().arms.placementSeed"
            (valueChange)="updateArmsPlacementSeed($event)">
          </app-slider-control>
        </div>
      </section>

      <!-- Sekcja: Detale i Dodatki -->
      <section class="bg-white p-6 rounded-xl shadow-lg border border-stone-200">
        <h2 class="text-xl font-semibold text-emerald-700 border-b border-stone-200 pb-3 mb-4">Detale i Dodatki</h2>
        <div class="space-y-5">
          <app-slider-control
            label="Gsto kolc贸w"
            [min]="0" [max]="100" [step]="1" [value]="config().spines.density"
            unit="%"
            (valueChange)="updateSpinesDensity($event)">
          </app-slider-control>
          <app-slider-control
            label="Dugo kolc贸w"
            [min]="1" [max]="50" [step]="1" [value]="config().spines.length"
            unit="mm"
            (valueChange)="updateSpinesLength($event)">
          </app-slider-control>
           <app-slider-control
            label="Liczba kwiat贸w"
            [min]="0" [max]="15" [step]="1" [value]="config().addons.flowers"
            (valueChange)="updateAddonsFlowers($event)">
          </app-slider-control>
          <app-slider-control
            label="Wielko kwiat贸w"
            [min]="0" [max]="100" [step]="1" [value]="config().addons.flowerSize"
            unit="%"
            (valueChange)="updateAddonsFlowerSize($event)">
          </app-slider-control>
          <app-slider-control
            label="Zr贸偶nicowanie wielkoci"
            [min]="0" [max]="100" [step]="1" [value]="config().addons.flowerSizeVariation"
            unit="%"
            (valueChange)="updateAddonsFlowerSizeVariation($event)">
          </app-slider-control>
          <app-slider-control
            label="Wielko doniczki"
            [min]="20" [max]="100" [step]="1" [value]="config().addons.potSize"
            unit="%"
            (valueChange)="updateAddonsPotSize($event)">
          </app-slider-control>
          <app-slider-control
            label="Uo偶enie (Seed)"
            [min]="1" [max]="1000" [step]="1" [value]="config().addons.seed"
            (valueChange)="updateAddonsSeed($event)">
          </app-slider-control>
        </div>
      </section>
    </div>
  </main>
</div>

<style>
  .bg-grid-pattern {
    background-color: #fafaf9; /* stone-50 */
    background-image:
      linear-gradient(rgba(113, 113, 122, 0.1) 1px, transparent 1px),
      linear-gradient(to right, rgba(113, 113, 122, 0.1) 1px, transparent 1px);
    background-size: 20px 20px;
  }
  
  /* --- New Slider Styles --- */
  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    cursor: pointer;
    outline: none;
    border-radius: 9999px;
    height: 8px;
    background: linear-gradient(to right, #059669 var(--value-percent), #e7e5e4 var(--value-percent)); /* emerald-600, stone-200 */
    transition: background 0.1s ease-in-out;
  }

  /* Thumb - Chrome, Safari, Opera, Edge */
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    height: 20px;
    width: 20px;
    background-color: #059669; /* emerald-600 */
    border-radius: 50%;
    border: 2px solid white;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    transition: background-color 0.2s ease-in-out;
    margin-top: -6px; /* (thumb height - track height) / 2 */
  }

  /* Thumb - Firefox */
  input[type="range"]::-moz-range-thumb {
    height: 20px;
    width: 20px;
    background-color: #059669; /* emerald-600 */
    border-radius: 50%;
    border: 2px solid white;
    box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
    transition: background-color 0.2s ease-in-out;
  }

  /* Hover/Active States */
  input[type="range"]:hover::-webkit-slider-thumb,
  input[type="range"]:active::-webkit-slider-thumb {
    background-color: #047857; /* emerald-700 */
  }

  input[type="range"]:hover::-moz-range-thumb,
  input[type="range"]:active::-moz-range-thumb {
    background-color: #047857; /* emerald-700 */
  }
</style>
